<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card margin">
          <div class="card-header card-header-danger">
            <h5 class="card-title " style="margin-top: 2%;">User Table</h5>


          </div>

          <div class="card-body">
            <div class="table-responsive">
              <table class="table">
                <thead class=" text-primary">
                <th>
                  Image
                  @if (isRotatedAv) {
                    <a> <fa-icon [icon]="faArrowUp"></fa-icon></a>
                  }@else{
                    <a > <fa-icon
                      [icon]="faArrowDown"></fa-icon></a>
                  }

                </th>

                <th>
                  UserName
                  @if (isRotatedAl) {
                    <a (click)="trierUsersByAlphabetics()"> <fa-icon
                      [icon]="faArrowUp"></fa-icon></a>
                  }@else{
                    <a (click)="trierUsersByAlphabetics()"> <fa-icon
                      [icon]="faArrowDown"></fa-icon></a>
                  }
                </th>
                <th>
                  Email
                  @if (isRotatedAv) {
                    <a> <fa-icon [icon]="faArrowUp"></fa-icon></a>
                  }@else{
                    <a > <fa-icon
                      [icon]="faArrowDown"></fa-icon></a>
                  }

                </th>

                <th>
                  Role
                  @if (isRotatedAv) {
                    <a> <fa-icon [icon]="faArrowUp"></fa-icon></a>
                  }@else{
                    <a > <fa-icon
                      [icon]="faArrowDown"></fa-icon></a>
                  }

                </th>
                <th>
                  Permisssions
                  @if (isRotatedAv) {
                    <a> <fa-icon [icon]="faArrowUp"></fa-icon></a>
                  }@else{
                    <a > <fa-icon
                      [icon]="faArrowDown"></fa-icon></a>
                  }

                </th>


                <th>
                  Actions
                </th>
                </thead>
                <tbody>
                  @for( data of list; track list.user){
                    <tr  (click)="openUserDialog(data)">

                      <td>
                        @if (data?.image) {

                          <img [src]="data.image" alt="this is if" class="profile-image" style="width: 100px; height: auto;">

                        }@else{
                          <img src="https://i.stack.imgur.com/l60Hf.png" alt="Default Profile Image" class="profile-image">

                        }

                      <td>{{data?.username}}</td>
                      <td>{{data?.email}}</td>
                      <td>{{data?.roles[0]}}</td>
                      <td>{{data?.permissions[0]}}</td>


                      <td class=" justify-content-center align-items-center">

                        <a  type="submit"> <fa-icon
                          class=" text-warning" [icon]="faInfo"
                          style="font-size: 1.5rem; margin: 0.5rem;"></fa-icon></a>
                        <a   (click)="openEditDialog($event, data)"> <fa-icon
                          class=" text-warning" [icon]="faEdit"
                          style="font-size: 1.5rem; margin: 0.5rem;"></fa-icon></a>


                        <a type="submit" (click)="deleteUser($event,data._id)" ><fa-icon
                          class=" text-danger" [icon]="faDeleteLeft"
                          style="font-size: 1.5rem; margin: 0.5rem;"></fa-icon></a>
                      </td>



                    </tr>
                  }
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
